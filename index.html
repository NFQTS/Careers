<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Portal — Alpha</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      color: white;
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      min-height: 100vh;
    }

    h1, h2 {
      font-weight: 300;
      letter-spacing: 1px;
      text-align: center;
    }

    section {
      padding: 60px 20px;
      max-width: 1000px;
      margin: 0 auto;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 32px;
      justify-items: center;
    }

    .card {
      border: 1px solid rgba(255,255,255,0.2);
      padding: 28px;
      width: 100%;
      max-width: 240px;
      text-align: center;
      backdrop-filter: blur(4px);
      transition: all 0.4s ease;
    }

    .card:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 0 40px rgba(255,255,255,0.12);
    }

    .number {
      font-size: 3rem;
      font-weight: 200;
      margin-bottom: 10px;
      display: block;
    }

    .desc {
      font-size: 0.95rem;
      opacity: 0.8;
      line-height: 1.4;
    }

    /* Opportunities */
    .opportunity-card {
      border: 1px solid rgba(255,255,255,0.2);
      padding: 24px;
      width: 100%;
      max-width: 320px;
      text-align: center;
      transition: all 0.4s ease;
    }

    .opportunity-card:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 0 40px rgba(255,255,255,0.12);
    }

    .opportunity-title {
      font-size: 1.2rem;
      margin-bottom: 8px;
    }

    .opportunity-desc {
      font-size: 0.9rem;
      opacity: 0.7;
      margin-bottom: 10px;
    }

    .opportunity-category {
      font-size: 0.75rem;
      letter-spacing: 1px;
      opacity: 0.6;
      text-transform: uppercase;
    }

    /* Auctions */
    .auction-card {
      border: 1px solid rgba(255,255,255,0.2);
      padding: 28px;
      width: 100%;
      max-width: 360px;
      text-align: left;
      transition: all 0.4s ease;
    }

    .auction-card:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 0 40px rgba(255,255,255,0.12);
    }

    .auction-title {
      font-size: 1.25rem;
      margin-bottom: 6px;
    }

    .auction-type {
      font-size: 0.75rem;
      letter-spacing: 1px;
      opacity: 0.6;
      margin-bottom: 12px;
      text-transform: uppercase;
    }

    .auction-desc {
      font-size: 0.95rem;
      opacity: 0.75;
      margin-bottom: 14px;
    }

    .auction-bid {
      font-size: 1.1rem;
      font-weight: 300;
      margin-bottom: 10px;
    }

    .auction-end {
      font-size: 0.8rem;
      opacity: 0.6;
      margin-bottom: 12px;
    }

    .bid-input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.3);
      color: white;
      font-size: 0.95rem;
      outline: none;
    }

    .bid-btn {
      width: 100%;
      padding: 10px;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.6);
      color: white;
      font-size: 0.9rem;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .bid-btn:hover {
      background: white;
      color: black;
    }

    .hud {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.6);
      padding: 10px 16px;
      display: flex;
      justify-content: space-between;
      font-size: 0.85rem;
      opacity: 0.85;
      z-index: 10;
    }
  </style>
</head>
<body>

  <div class="hud">
    <span>Live Sync In: <span id="timer">01:00</span></span>
    <span>Status: <span id="status">Connecting…</span></span>
  </div>

  <!-- IMPACT -->
  <section>
    <h1>Our Impact</h1>
    <div class="grid" id="impact-grid"></div>
  </section>

  <!-- OPPORTUNITIES -->
  <section>
    <h1>Live Opportunities</h1>
    <div class="grid" id="opportunities-grid"></div>
  </section>

  <!-- AUCTIONS -->
  <section>
    <h1>Public Auctions</h1>
    <div class="grid" id="auctions-grid"></div>
  </section>

  <script>
    // =====================
    // CONFIG — paste your sheet URLs here
    // =====================
    const IMPACT_URL = "PASTE_IMPACT_SHEET_CSV_URL_HERE";
    const OPPORTUNITIES_URL = "PASTE_OPPORTUNITIES_SHEET_CSV_URL_HERE";
    const AUCTIONS_URL = "PASTE_AUCTIONS_SHEET_CSV_URL_HERE";

    const statusEl = document.getElementById("status");
    const timerEl = document.getElementById("timer");

    let timeLeft = 60;

    function updateTimer() {
      const m = Math.floor(timeLeft / 60);
      const s = timeLeft % 60;
      timerEl.textContent = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
      if (timeLeft === 0) {
        syncAll();
        timeLeft = 60;
      } else {
        timeLeft--;
      }
    }

    function parseCSV(text) {
      const rows = text.trim().split("\n").map(r => r.split(","));
      const headers = rows.shift();
      return rows.map(row => {
        const obj = {};
        headers.forEach((h, i) => obj[h.trim()] = row[i]?.trim());
        return obj;
      });
    }

    async function fetchSheet(url) {
      const res = await fetch(url + "&t=" + Date.now());
      const text = await res.text();
      return parseCSV(text);
    }

    async function syncAll() {
      try {
        statusEl.textContent = "Syncing…";

        const [impactData, oppData, auctionData] = await Promise.all([
          fetchSheet(IMPACT_URL),
          fetchSheet(OPPORTUNITIES_URL),
          fetchSheet(AUCTIONS_URL)
        ]);

        renderImpact(impactData);
        renderOpportunities(oppData);
        renderAuctions(auctionData);

        statusEl.textContent = "Live ✓";
      } catch (e) {
        console.error(e);
        statusEl.textContent = "Offline";
      }
    }

    // =====================
    // RENDERERS
    // =====================
    function renderImpact(data) {
      const grid = document.getElementById("impact-grid");
      grid.innerHTML = "";

      data.forEach(row => {
        const value = formatValue(row.key, row.value);
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <span class="number">${value}</span>
          <span class="desc">${formatLabel(row.key)}</span>
        `;
        grid.appendChild(card);
      });
    }

    function renderOpportunities(data) {
      const grid = document.getElementById("opportunities-grid");
      grid.innerHTML = "";

      data.filter(row => row.active === "true").forEach(row => {
        const card = document.createElement("div");
        card.className = "opportunity-card";
        card.innerHTML = `
          <div class="opportunity-title">${row.title}</div>
          <div class="opportunity-desc">${row.description}</div>
          <div class="opportunity-category">${row.category}</div>
        `;
        grid.appendChild(card);
      });
    }

    function renderAuctions(data) {
      const grid = document.getElementById("auctions-grid");
      grid.innerHTML = "";

      data.forEach(row => {
        const card = document.createElement("div");
        card.className = "auction-card";
        card.innerHTML = `
          <div class="auction-title">${row.title}</div>
          <div class="auction-type">${row.type}</div>
          <div class="auction-desc">${row.description}</div>
          <div class="auction-bid">Current Bid: $${Number(row.current_bid).toLocaleString()}</div>
          <div class="auction-end">Ends: ${new Date(row.ends_at).toLocaleString()}</div>
          <input class="bid-input" type="number" min="${Number(row.current_bid) + 1}" placeholder="Enter your bid">
          <button class="bid-btn">Place Bid</button>
        `;
        const btn = card.querySelector(".bid-btn");
        const input = card.querySelector(".bid-input");
        btn.onclick = () => {
          const bid = input.value;
          if (!bid || bid <= Number(row.current_bid)) {
            alert("Bid must be higher than current bid.");
            return;
          }
          alert(`Bid of $${Number(bid).toLocaleString()} submitted for "${row.title}".\n\n(This is a public demo — real bid logic comes later.)`);
        };
        grid.appendChild(card);
      });
    }

    // =====================
    // HELPERS
    // =====================
    function formatLabel(key) {
      return key.replace(/_/g, " ").replace(/\b\w/g, l => l.toUpperCase());
    }

    function formatValue(key, value) {
      if (key.includes("fund") || key.includes("payout")) {
        return "$" + Number(value).toLocaleString();
      }
      return Number(value).toLocaleString();
    }

    // Initial load
    syncAll();
    setInterval(updateTimer, 1000);
    updateTimer();
  </script>

</body>
</html>